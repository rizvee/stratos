/* css/zones.css */

/* --- General Zone Styles --- */
.game-zone .zone-title {
    position: absolute;
    top: 20px; /* Adjust as needed for visual placement */
    left: 50%;
    /* Counter-rotate to appear flat relative to the camera */
    transform: translateX(-50%) rotateX(calc(-1 * var(--iso-angle-x))) rotateZ(calc(-1 * var(--iso-angle-z)));
    color: rgba(255, 255, 255, 0.75);
    font-family: var(--font-display, 'Orbitron', sans-serif); /* Use display font */
    font-size: 1.8em;
    font-weight: bold;
    text-shadow: 0 0 5px black, 0 0 10px rgba(0,0,0,0.5);
    pointer-events: none;
    z-index: 0; /* Behind most interactive objects */
    letter-spacing: 1px;
}


/* --- Rooftop Commune (Theme: Teal = Health, Social, Greenery) --- */
#zone-rooftop-commune {
    background: radial-gradient(ellipse at center, rgba(135, 206, 235, 0.05) 0%, rgba(79, 195, 247, 0.0) 70%);
}
#zone-rooftop-commune .iso-building { /* e.g., Community Hub */
    --bg-color: #E0F2F1;
    border: 2px solid var(--health-color);
}
#zone-rooftop-commune .player-pod {
    --bg-color: #B2DFDB;
    border: 2px solid var(--health-color);
    box-shadow: 0 0 10px var(--health-color), 0 0 5px var(--health-color) inset;
}
#zone-rooftop-commune .solar-panel {
    --bg-color: #263238;
    border: 1px solid var(--primary-accent); /* Blue accent */
}
#zone-rooftop-commune .solar-panel::before,
#zone-rooftop-commune .solar-panel::after {
    background-color: #37474F;
}
#zone-rooftop-commune .rooftop-planter {
    --bg-color: #6D4C41; /* Brown for planter box */
    /* --h is set inline for specific planter height */
}
#zone-rooftop-commune .rooftop-planter .plant-fill {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%; /* depth of planter */
    background-color: #A5D6A7; /* Light green for plant tops */
    transform: translateZ(var(--h)); /* Sits on top of the planter's height (varies per planter) */
    border: 1px solid #388E3C;
    box-sizing: border-box;
}


/* --- Vertical Farming Tower (Theme: Green = Growth, Teal Accents) --- */
#zone-vertical-farm {
    background: radial-gradient(ellipse at center, rgba(76, 175, 80, 0.05) 0%, rgba(129, 199, 132, 0.0) 70%);
}
#zone-vertical-farm .farm-tower {
    --bg-color: #C8E6C9;
    border: 2px solid #4CAF50;
    box-shadow: 0 0 15px rgba(76, 175, 80, 0.4);
}
#zone-vertical-farm .farm-level {
    position: absolute;
    width: 90%; height: 90%;
    left: 5%; top: 5%;
    transform: translateZ(var(--level-z));
    background-color: var(--bg-color, rgba(165, 214, 167, 0.5)); /* Semi-transparent green */
    border: 1px dashed #388E3C;
    box-sizing: border-box;
}
#zone-vertical-farm .farm-plot.ready-to-harvest { /* Specificity (1,1,0) - acceptable for this context */
    animation: pulse-green 1.5s infinite;
    /* Ensure SVG background is cleared if it was used for seedling, and cuboid faces are visible */
    background-image: none !important;
}
#zone-vertical-farm .farm-plot.svg-object { /* For seedling stage */
    /* Styles applied when seedling SVG is active */
}


/* --- Underground Transit Hub (Theme: Amber = Power, Dark, Industrial) --- */
#zone-underground-transit {
    background: linear-gradient(to bottom, rgba(50,50,60,0.92) 0%, rgba(30,30,40,0.97) 100%),
                url("https://www.transparenttextures.com/patterns/concrete-wall.png");
    background-color: #212121;
}
#zone-underground-transit .train-platform {
    --bg-color: #424242;
    border: 2px solid var(--power-color);
    box-shadow: 0 0 10px var(--power-color);
}
#zone-underground-transit .platform-line {
    position: absolute;
    height: 100%; /* depth of platform */
    width: 5px;
    background-color: var(--power-color);
    transform: translateZ(calc(var(--h) + 1px)); /* On top of platform surface */
}
#zone-underground-transit .train {
    --bg-color: #757575;
    border: 1px solid #BDBDBD;
    animation: train-subtle-hum 3s infinite ease-in-out;
}
#zone-underground-transit .train::before,
#zone-underground-transit .train::after {
    background-color: #616161;
}
#zone-underground-transit .train-window {
    position: absolute;
    background-color: var(--primary-accent); /* Teal/Blue lights */
    box-shadow: 0 0 8px var(--primary-accent);
    /* Position relative to train body with transforms/percentages in HTML style or more specific classes */
}


/* --- Cyber Alley (Theme: Violet = Stealth, Neon, Dark) --- */
#zone-cyber-alley {
    background: linear-gradient(135deg, #1A0A2A 0%, #3B1A4B 60%, #2E0854 100%);
    overflow: hidden; /* Contains neon glows */
}
#zone-cyber-alley .neon-sign {
    position: absolute;
    font-family: var(--font-display, 'Orbitron', sans-serif);
    color: var(--sign-color, var(--stealth-color));
    text-shadow: 0 0 5px #fff, 0 0 10px var(--sign-color, var(--stealth-color)), 0 0 15px var(--sign-color, var(--stealth-color)), 0 0 20px var(--sign-color, var(--stealth-color));
    /* transform set inline for specific rotations/placement */
    padding: 5px;
    white-space: nowrap; /* Prevent ugly wrapping for short signs */
}
#zone-cyber-alley .alley-building-facade {
    --bg-color: #2C1D3C;
    border: 1px solid var(--stealth-color);
    box-shadow: 0 0 8px var(--stealth-color) inset;
}
#zone-cyber-alley .data-conduit {
    --bg-color: #4A235A;
    /* --h: 10px; set inline */
    border-radius: 5px; /* Makes the top face (the var --d dimension) appear rounded */
}
#zone-cyber-alley .data-conduit::before,
#zone-cyber-alley .data-conduit::after {
    border-radius: 5px 5px 0 0; /* Only round top edges of faces for effect */
}


/* --- Drone Port (Theme: Neutral/Industrial, Amber/Power Accents) --- */
#zone-drone-port {
    background: linear-gradient(to top, #3E4551 0%, #4E5866 100%);
}
#zone-drone-port .landing-pad {
    --bg-color: #546E7A;
    /* --h: 10px; set inline */
    border: 2px solid var(--power-color);
    /* For circular top, border-radius only affects the main element (top face) */
    border-radius: 50%;
}
#zone-drone-port .landing-pad-lights {
    position: absolute;
    width: 5px; height: 5px;
    background-color: var(--power-color);
    border-radius: 50%;
    box-shadow: 0 0 5px var(--power-color);
    animation: blink-amber 2s infinite;
    /* Positioned by JS or more specific CSS for each light */
}
#zone-drone-port .drone-object {
    --bg-color: #CFD8DC;
    /* Dimensions set inline */
}


/* --- Legacy Core (Theme: Dark, Mysterious, Glitchy Accents, Primary Accent Color) --- */
#zone-legacy-core {
    background: #000;
    overflow: hidden; /* Contains glitch effects */
}
#zone-legacy-core .data-archive-unit {
    --bg-color: #1C1C1C;
    border: 1px solid var(--primary-accent);
    box-shadow: 0 0 7px var(--primary-accent);
    animation: glitch-pulse 5s infinite alternate;
}
#zone-legacy-core .data-archive-unit .data-stream-effect {
    position: absolute;
    width: 100%; height: 100%;
    top:0; left:0;
    background:
        repeating-linear-gradient(
            0deg,
            var(--primary-accent, #4FC3F7), /* Fallback for primary-accent */
            var(--primary-accent, #4FC3F7) 1px,
            transparent 1px,
            transparent 5px
        );
    opacity: 0.3;
    transform: translateZ(var(--h)); /* On top surface, var(--h) from parent */
    animation: data-scroll 2s linear infinite;
    pointer-events: none;
}

/* Keyframes (pulse-green, train-subtle-hum, blink-amber, glitch-pulse, data-scroll) */
/* These should remain as they were, no changes needed for them based on the warnings */
@keyframes pulse-green {
    0% { box-shadow: 0 0 5px #4CAF50, 0 0 3px #4CAF50 inset; }
    50% { box-shadow: 0 0 15px #81C784, 0 0 8px #81C784 inset; }
    100% { box-shadow: 0 0 5px #4CAF50, 0 0 3px #4CAF50 inset; }
}
@keyframes train-subtle-hum {
    0% { transform: translate3d(var(--x, 0px), var(--y, 0px), calc(var(--z, 0px) + 0px)) scale(1); }
    50% { transform: translate3d(var(--x, 0px), var(--y, 0px), calc(var(--z, 0px) + 1px)) scale(1.005); } /* Using parent's original transform vars */
    100% { transform: translate3d(var(--x, 0px), var(--y, 0px), calc(var(--z, 0px) + 0px)) scale(1); }
}
@keyframes blink-amber {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}
@keyframes glitch-pulse { /* Simplified for clarity */
    0%, 100% { opacity: 1; box-shadow: 0 0 7px var(--primary-accent); transform: skewX(0deg) translateX(0); }
    50% { opacity: 0.7; box-shadow: 0 0 15px red; transform: skewX(3deg) translateX(1px); }
    52% { opacity: 0.9; box-shadow: 0 0 10px #0ff; transform: skewX(-2deg) translateX(-1px); }
}
@keyframes data-scroll {
    0% { background-position-y: 0; }
    100% { background-position-y: -20px; }
}